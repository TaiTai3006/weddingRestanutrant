{% extends 'layout.html' %} {% block title %} Home {% endblock %}
{% block content %}

<div class="row">
  <form class="col-9" method="POST" action="" id="weddingForm">
    {% csrf_token %}
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button
          class="nav-link active"
          id="home-tab"
          data-bs-toggle="tab"
          data-bs-target="#home-tab-pane"
          type="button"
          role="tab"
          aria-controls="home-tab-pane"
          aria-selected="true"
        >
          Thông tin tiệc cưới
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button
          class="nav-link"
          id="profile-tab"
          data-bs-toggle="tab"
          data-bs-target="#profile-tab-pane"
          type="button"
          role="tab"
          aria-controls="profile-tab-pane"
          aria-selected="false"
        >
          Thông tin món ăn
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button
          class="nav-link"
          id="contact-tab"
          data-bs-toggle="tab"
          data-bs-target="#contact-tab-pane"
          type="button"
          role="tab"
          aria-controls="contact-tab-pane"
          aria-selected="false"
        >
          Thông tin dịch vụ
        </button>
      </li>
    </ul>
    <div class="tab-content" id="myTabContent">
      <div
        class="tab-pane fade show active"
        id="home-tab-pane"
        role="tabpanel"
        aria-labelledby="home-tab"
        tabindex="0"
      >
        <div id="khachhang"></div>

        <h4>Thông tin tiệc cưới</h4>
        <div class="row">
          <div class="col mb-3" id="weddingInfo">
            <label for="ngaydaitiec" class="form-label">Ngày đãi tiệc </label>
            <input
              type="date"
              class="form-control"
              id="ngaydaitiec_input"
              name="ngaydaitiec"
              placeholder="Ngày đãi tiệc "
            />
          </div>
        </div>
        <div class="row">
          <div class="col mb-3" id="weddingInfo">
            <label for="maca" class="form-label">Ca</label>

            <select
              class="form-select"
              name="maca_select"
              id="maca_select"
              aria-label="Default select example"
            >
              <option value="">Chọn ca</option>
              {% for shift in shifts %}
              <option value={{shift.maca}}>
                {{shift.tenca}} ({{shift.giobatdau}}-{{shift.gioketthuc}})
              </option>
              {%endfor%}
            </select>
          </div>
          <div  class="col mb-3" id="selectLobbies">
          </div>
        </div>
        <div class="row">
          <div class="col mb-3" id="weddingInfo">
            <label for="soluongban" class="form-label" id="soluongban_lable">Số lượng bàn</label>
            <input
              type="number"
              class="form-control"
              id="soluongban_input"
              min=1
              name="soluongban"
              placeholder="Số lượng bàn"
            />
          </div>
        </div>
      </div>
      
      <div
        class="tab-pane fade"
        id="profile-tab-pane"
        role="tabpanel"
        aria-labelledby="profile-tab"
        tabindex="0"
      >
      <div id="notification_result"></div>
        <select
          id="foodTypeSelect"
          class="form-select form-select-sm outline-none"
          aria-label="Small select example"
        >
         <option value="all">Tất cả</option>
          {% for foodType in foodTypes %}

          <option value="{{foodType.maloaimonan}}">
            {{foodType.tenloaimonan}}
          </option>

          {% endfor %}
        </select>
        <div id="foodlist"></div>
      </div>
      <div
        class="tab-pane fade"
        id="contact-tab-pane"
        role="tabpanel"
        aria-labelledby="contact-tab"
        tabindex="0"
      >
        <table class="table">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Tên dịch vụ</th>
              <th scope="col">Số lượng</th>
              <th scope="col">Đơn giá</th>
              <th scope="col">Ghi chú</th>
              <th scope="col">Select</th>
            </tr>
          </thead>
          <tbody>
            {% load humanize %}
            {% for service in services %}
            <tr>
              <th scope="row">{{ forloop.counter }}</th>
              <td>{{ service.tendichvu }}</td>
              <td> <input
                type="number"
                class="soluongDV_input"
                min=1
                name="soluongdichvu"
                placeholder="Số lượng"
                id="soluong_{{service.madichvu}}"
                style="display: none;"
              /></td>

              <td id="dongia_{{service.madichvu}}">{{ service.dongia|floatformat|intcomma }}</td>
              <td><input
                type="text"
                class="ghichuDV_input"
                name="ghichudichvu"
                placeholder="Ghi chú ..."
                id="ghichu_{{service.madichvu}}"
                style="display: none;"
              /></td>
              <td id="weddingInfo">
                <input
                  id="service_checkbox"
                  type="checkbox"
                  name="selected_services"
                  value="{{ service.madichvu }}"
                />
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <button type="submit" id="payment_button" class="btn btn-primary">Thanh toán</button>
    <button id='totalBill_button' class="btn btn-primary">Tính hoá đơn</button>
  </form>
  <div class="col-3 wedding-info p-2">
    <h4>Thông tin khách hàng</h4>
    <div class="row">
      <div class="col mb-3" id="weddingInfo">
        <label for="tenchure" class="form-label">Tên chú rể</label>
        <input
          type="text"
          class="form-control"
          id="tenchure_input"
          name="tenchure"
          placeholder="Tên chú rể"
        />
      </div>
      <div class="col mb-3" id="weddingInfo">
        <label for="tencodau" class="form-label">Tên cô dâu</label>
        <input
          type="text"
          class="form-control"
          id="tencodau_input"
          name="tencodau"
          placeholder="Tên cô dâu"
        />
      </div>
    </div>
    <div class="mb-3">
      <label for="sdt" class="form-label">Số điện thoại</label>
      <input
        type="text"
        class="form-control"
        id="sdt_input"
        name="sdt"
        placeholder="Số điện thoại"
      />
    </div>

    <div id="weddingInfoDisplay">
      <table class="table" id="food_table_comfirm">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Tên món ăn</th>
            <th scope="col">Đơn giá</th>
            <th scope="col">Ghi chú</th>
            <th scope="col">Thành tiền</th>
          </tr>
        </thead>
        <tbody></tbody>
        <tfoot>
          <tr>
            <td colSpan="4" style="textAlign: "right"">
              Tổng tiền đơn giá bàn:
            </td>
            <td id="result_tdgb">
              0
            </td>
          </tr>
        </tfoot>
    </div>
  </div>
  <div id="weddingInfoDisplay">
    <table class="table" id="service_table_comfirm">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Mã dịch vụ</th>
          <th scope="col">Số lượng</th>
          <th scope="col">Đơn giá</th>
          <th scope="col">Ghi chú</th>
          <th scope="col">Thành tiền</th>
        </tr>
      </thead>
      <tbody></tbody>
      <tfoot>
        <tr>
          <td colSpan="5" style="textAlign: "right"">
            Tổng tiền dịch vụ:
          </td>
          <td id="result_ttdd">
            0
          </td>
        </tr>
      </tfoot>
      <div id="totalBill_result"></div>
  </div>
  
</div>

</div>

{% endblock %}
