{% extends 'layout.html' %} {% block title %} {% endblock %} 
{% block content %}

{% load mathfilters %} {% load humanize %}
    <style>
        .cancel-container{
            overflow: scroll;
            height: 600px;
        }
        .cancel-container::-webkit-scrollbar{
            display: none;
        }
        .info, .cancel {
            margin-bottom: 20px;
        }
        .info p, .cancel p {
            margin: 5px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 10px;
        }
        table, th, td {
            border: 1px solid #ccc;
        }
        th, td {
            padding: 5px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .totals {
            text-align: right;
        }
        .totals td {
            border: none;
        }
        .btn-container {
            display: flex;
            justify-content: space-between;
        }
        .btn-container button, .btn-container select {
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            background-color: #007bff;
            color: white;
            cursor: pointer;
        }
        .btn-container button:hover, .btn-container select:hover {
            background-color: #0056b3;
        }
    </style>

    <div class="cancel-container p-2">
        <form id="cancelForm">
            <input type="hidden" name="mahoadon" id="mahoadon">
            <input type="hidden" name="ngaythanhtoan" id="ngaythanhtoan" value="{{ wedding.ngaythanhtoan }}">
            <input type="hidden" name="matieccuoi" id="matieccuoi" value="{{ wedding.matieccuoi }}">
            <input type="hidden" name="username" id="username" value="{{ wedding.username }}"> 
            <input type="hidden" name="tongtiendichvu" id="tongtiendichvu" value="{{ wedding.tongtiendichvu }}">
            <input type="hidden" name="tienphat" id="tienphat" value="0"> 
            <input type="hidden" name="tongtienhoadon" id="tongtienhoadon" value="{{ wedding.tongtiendattiec }}">
            <input type="hidden" name="conlai" id="conlai" value="{{ wedding.conlai }}"> 
        
           
            
            <div class="cancel-container p-2">
                <h2 class="text-center py-3">XÁC NHẬN THÔNG TIN HOÁ ĐƠN</h2>
                <div class="info row justify-content-between">
                    <div class="col-3">
                        <p>Ngày hủy: {{wedding.ngayhuy}}</p>
                        <p>Tên cô dâu: {{wedding.tencodau}}</p>
                        <p>Tên chú rể: {{wedding.tenchure}}</p>
                    </div>
                    <div class="col-3">
                        <p>Số ngày hủy sớm : {{songayhuysom}}</p>
                        <p>Số lượng bàn: {{wedding.soluongban}}</p>
                        <p>Đơn giá bàn: {{wedding.dongiaban|intcomma}}</p>
                    </div>
                    <div class="col-3">
                        <p>Tổng tiền bàn: {{wedding.tongtienban|intcomma}}</p>
                    </div>
                </div>
                <table class="totals">
                    <tbody>
                        
                       
                        <tr>
                            <td>Tổng tiền hoá đơn:</td>
                            <td>{{wedding.tongtien|intcomma }}</td>
                        </tr>
                        <tr>
                            <td>Tiền cọc (50%):</td>
                            <td>{{wedding.tiendatcoc|intcomma}}</td>
                        </tr>
                        <tr>
                            <td>Số tiền cần thanh toán:</td>
                            <td>{{wedding.conlai|intcomma}}</td>
                        </tr>
                    </tbody>
                </table>
                <div class="cancel d-flex justify-content-start">
                    <p>Phương thức thanh toán:</p>
                    <select id="cancelMethod">
                        <option value="cash">Tiền mặt</option>
                        <option value="credit">Thẻ tín dụng</option>
                        <option value="bank">Chuyển khoản</option>
                    </select>
                </div>
                <div class="btn-container">
                    <button type="button" onclick="history.back()">Quay lại</button>
                    <button type="submit">Tiếp tục</button>
                </div>
            </div>
        </form>
    </div>
    <script>
      document.getElementById('cancelForm').addEventListener('submit', function(event) {
    event.preventDefault();
    const form = event.target;

    const invoiceData = {
        ngaythanhtoan: form.ngaythanhtoan.value,
        tongtiendichvu: form.tongtiendichvu.value,
        tienphat: form.tienphat.value,
        tongtienhoadon: form.tongtienhoadon.value,
        conlai: form.conlai.value,
        matieccuoi: form.matieccuoi.value,
        username: form.username.value,
        danhsachdichvu: []
    };

    const services = {};
    

    
    axios.post('/paymentInvoice/', invoiceData)
        .then(response => {
            alert('Wedding cancel successfully!');
            window.location.href = '/report/';
        })
        .catch(error => {
            console.error('There was an error!', error);
        });
});

    
    </script>
    
{% endblock %}